Хорошо, давайте разобьём задачу на шаги и создадим план разработки программы для рисования раскладки контура тёплого пола.

План:

Создание интерфейса для рисования планировки помещения:

Добавить инструменты для рисования стен (линии, прямоугольники).
Реализовать возможность удаления и редактирования нарисованных стен.
Добавить функцию сохранения и загрузки планировки помещения.
Добавление возможности установки начала контура (коллектора):

Реализовать инструмент для установки точки коллектора на планировке.
Обеспечить возможность перемещения и удаления коллектора.
Установка максимальной длины каждого контура:

Добавить поле ввода для указания максимальной длины контура.
Реализовать проверку и ограничение длины контура при рисовании.
Установка шага между контурами:

Добавить поле ввода для указания шага между контурами.
Применять заданный шаг при рисовании контуров.
Выбор типа контура:

Создать выпадающий список или переключатели для выбора типа контура (змеевиковый, спиральный, двойной змеевиковый).
Реализовать алгоритмы рисования контуров для каждого типа.
Рисование контуров:

Реализовать функции для рисования контуров выбранного типа с учётом заданных параметров (максимальная длина, шаг).
Отображать нарисованные контуры на планировке помещения.
Дополнительные функции:

Добавить возможность удаления и редактирования нарисованных контуров.
Реализовать функцию расчёта общей длины контуров и отображения информации.
Добавить возможность экспорта и импорта проекта раскладки контуров.
Улучшение пользовательского интерфейса:

Стилизовать элементы интерфейса (кнопки, поля ввода, меню).
Добавить подсказки и инструкции для пользователя.
Обеспечить адаптивность интерфейса для различных устройств.
Тестирование и отладка:

Провести тщательное тестирование всех функций программы.
Исправить выявленные ошибки и недочёты.
Оптимизировать производительность программы.
Документация и развёртывание:

Создать документацию с описанием функций и инструкциями по использованию программы.
Подготовить программу к развёртыванию и распространению.
Этот план даёт общее представление о шагах и функциях, которые нужно реализовать в программе для рисования раскладки контура тёплого пола. Каждый шаг может быть разбит на более мелкие задачи в зависимости от сложности и требований проекта.



Алгоритм:

При первом клике по холсту в режиме рисования стен:

Сохраняем координаты начальной точки стены (startX, startY).
Создаем новый массив для хранения координат точек текущей стены (wallCoordinates).
Добавляем начальную точку в массив wallCoordinates.
Добавляем обработчики событий 'mousemove', 'click' и 'dblclick' на холст.
При движении курсора (событие 'mousemove'):

Получаем координаты текущей позиции курсора (endX, endY).
Очищаем холст.
Рисуем сетку.
Рисуем все ранее нарисованные стены из массива walls.
Рисуем текущую стену от начальной точки (startX, startY) до текущей позиции курсора (endX, endY).
Вычисляем длину текущей стены и отображаем ее.
При повторном клике по холсту:

Получаем координаты конечной точки стены (endX, endY).
Добавляем конечную точку в массив wallCoordinates.
Устанавливаем начальную точку следующей стены (startX, startY) равной конечной точке текущей стены (endX, endY).
При двойном клике по холсту:

Получаем координаты конечной точки стены (endX, endY).
Добавляем конечную точку в массив wallCoordinates.
Добавляем массив wallCoordinates в массив walls для хранения всех нарисованных стен.
Очищаем массив wallCoordinates.
Вычисляем площадь комнаты на основе координат точек в массиве walls.
Отображаем площадь комнаты в центре комнаты.
При нажатии на кнопку "Закончить рисование стен":

Удаляем обработчики событий 'mousemove', 'click' и 'dblclick' с холста.
Изменяем стиль курсора на стандартный.
При нажатии на кнопку "Очистить стены":

Очищаем холст.
Рисуем сетку.
Очищаем массив walls.
Сбрасываем значение длины стены.
При выборе инструмента "Дверь":

Отображаем поле ввода для указания ширины дверного проема.
Изменяем стиль курсора на прямоугольный курсор.
Добавляем обработчик события 'click' на холст.
При клике по стене в режиме рисования дверей:

Получаем координаты точки клика на стене.
Получаем ширину дверного проема из поля ввода.
Рисуем дверной проем серым цветом на стене в месте клика с указанной шириной.