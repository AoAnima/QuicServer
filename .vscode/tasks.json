{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    // ${workspaceFolderBasename}/${relativeFileDirname}/${fileBasename}
    // https://github.com/golang/vscode-go/wiki/debugging
    "version": "2.0.0",
    "inputs": [
        {
          "id": "moduleName",
          "type": "promptString",
          "description": "Имя нового модуля",
          "default": "test"
        }
      ],
    "tasks": [
      {
        "label": "Новый модуль",
        "type": "shell",
        "windows": {
          "command": "echo \"Создаю модуль ${input:moduleName}\" \n ; ${workspaceFolder}/CreateService.ps1 ${input:moduleName}"
        },
        "linux": {
          "command": "echo \"Создаю модуль ${input:moduleName}\" ;\n ${workspaceFolder}/CreateService.sh ${input:moduleName}"
        },
        "problemMatcher": {
          "base": "$go",
          "background": {
            "activeOnStart": true,
            "beginsPattern": ".*",
            "endsPattern": "[.*]"
          }
        }     
      },
      {
        "label": "test",
        "type": "shell",
        "command": "cd ${fileDirname} ;go run ${file} ",
        "group": {
          "kind": "test",
          "isDefault": true
        },
        "isBackground": true,
        "presentation": {
          "echo": true,
          "reveal": "always",
          "focus": true,
          "panel": "shared"
        },
        "problemMatcher": {
          "base": "$go",
          "background": {
            "activeOnStart": true,
            "beginsPattern": ".*",
            "endsPattern": "[.*]"
          }
        }
      },
      {
        "label": "Сборка",
        "type": "shell",
        "windows": {
          "command": "cd ${fileDirname}/..; go mod tidy;  go build -o ${fileDirname}/../bin/${fileBasenameNoExtension}.exe ${fileDirname}"
        },
        "linux": {
          "command": "cd ${fileDirname}/..; go mod tidy;  go build -o ${fileDirname}/../bin/${fileBasenameNoExtension} ${fileDirname}"
        },
        "group": {
          "kind": "build",
          "isDefault": true
        },
        "isBackground": true,
        "presentation": {
          "echo": true,
          "reveal": "always",
          "focus": true,
          "panel": "shared"
        },
        "problemMatcher": {
          "base": "$go",
          "background": {
            "activeOnStart": true,
            "beginsPattern": ".*",
            "endsPattern": "[.*]"
          }
        }
      },
      {
        "label": "Сбора и запуск",
        
        "type": "shell",
        "windows": {
          "command": "cd ${fileDirname}/../bin ; .${pathSeparator}${fileBasenameNoExtension}.exe"
        },
        "linux": {
          "command": "cd ${fileDirname}/../bin ;sudo .${pathSeparator}${fileBasenameNoExtension}"
        },
        "group": {
          "kind": "build",
          "isDefault": false
        },
        "dependsOrder": "sequence",
        "problemMatcher": [
          "$go"
        ],
        "dependsOn": "Сборка",
        "presentation": {
          "echo": true,
          "reveal": "always",
          "focus": true,
          "panel": "shared"
        }
      },
      {
        "label": "Запуск",
        "type": "process",
        "windows": {
          "command": "${fileDirname}/../bin/${pathSeparator}${fileBasenameNoExtension}.exe"
        },
        "linux": {
          "command": "sudo ${fileDirname}/../bin/${pathSeparator}${fileBasenameNoExtension}"
        },
        "problemMatcher": [
          "$go"
        ],
        // "group": {
        //   "kind": "build",
        //   "isDefault": true
        // },
        "isBackground": true,
        "presentation": {
          "echo": true,
          "reveal": "always",
          "focus": false,
          "panel": "new"
        }
      },
      {
        "label": "Сборка оркестратора",
        "type": "shell",
        "windows": {
          "command": "cd ${workspaceFolder}/Orkestrator/; go mod tidy;  go build -o ${workspaceFolder}/Orkestrator/bin/Orkestrator.exe ${workspaceFolder}/Orkestrator/src"
        },
        "linux": {
          "command": "cd ${workspaceFolder}/Orkestrator/; go mod tidy;  go build -o ${workspaceFolder}/Orkestrator/bin/Orkestrator ${workspaceFolder}/Orkestrator/src"
        },
        "group": {
          "kind": "build",
          "isDefault": true
        },
        "isBackground": true,
        "presentation": {
          "echo": true,
          "reveal": "always",
          "focus": true,
          "panel": "shared"
        },
        "problemMatcher": {
          "base": "$go",
          "background": {
            "activeOnStart": true,
            "beginsPattern": ".*",
            "endsPattern": "[.*]"
          }
        }
      },
      {
        "label": "Запуск Оркестратора",
        "type": "shell",
        "windows": {
          "command": "cd  ${workspaceFolder}/Orkestrator/bin/ ;  ./Orkestrator.exe"
        },
        "linux": {
          "command": "cd  ${workspaceFolder}/Orkestrator/bin/ && sudo ${workspaceFolder}/Orkestrator/bin/Orkestrator "
        },
        "problemMatcher": [
          "$go"
        ],
        "group": {
          "kind": "build",
          "isDefault": true
        },
        "dependsOrder": "sequence",
        "dependsOn": "Сборка оркестратора",
        "isBackground": true,
        "presentation": {
          "echo": true,
          "reveal": "always",
          "focus": false,
          "panel": "new"
        }
      }
    ]
}